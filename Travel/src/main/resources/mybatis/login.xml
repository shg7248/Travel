<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="login.model.Login">
	<insert id="UserInsert">
		insert into member 
		values(seq_member.nextval,#{email},#{name},#{pwd, jdbcType=VARCHAR},#{phone},#{flatform, jdbcType=VARCHAR},sysdate,200)
	</insert>
	
	<select id="UserEmail" resultType="int">
		select count(*) from member
		where email = #{email}
	</select>
	
	<select id="UserLogin" resultType="MyMember">
		select m.mnum, email, name, pwd, phone, flatform, reg_date, p.point
		from member m
		inner join (
			select mnum, sum(point) point
			from point
			group by mnum
		) p
		on m.mnum = p.mnum
		where m.email = #{email}
	</select>
	
	<insert id="CompanyInsert">
		insert into company
		values(#{cnum},#{image},#{email},#{pwd},#{phone},1,sysdate)
	</insert>
	
	<select id="CompanyEmail" resultType="int">
		select count(*) from company
		where email = #{email}
	</select>
	
	<select id="CompanyLogin" resultType="MyCompany">
		select * from company
		where email = #{email}
	</select>
	
	<select id="CompanyCnum" resultType="int">
		select count(*) from company
		where cnum = #{cnum}
	</select>
	
</mapper>